# Clubs Hive Import Setup - Targetsaway User App

This document describes the clubs Hive database import functionality that has been added to the targetsaway user app.

## Overview

The targetsaway app can now import club data from Firebase Firestore into its local Hive database, alongside events, firearms, and target zones data.

## Files Created

### 1. Model Files
- **`lib/models/hive/club.dart`** - Hive model for Club with a single `clubname` field (typeId: 133)
- **`lib/models/hive/club.g.dart`** - Generated Hive adapter (auto-generated by build_runner)

## Files Modified

### 1. `lib/main.dart`
- Added import for Club model
- Registered ClubAdapter with Hive (typeId: 133)
- Opens the 'clubs' Hive box on app startup

### 2. `lib/utils/import_data.dart`
- Added import for Club model
- Added `clubsCollection` constant
- Added clubs box clearing in `_clearAllHiveData()` method
- Added `_importClubs()` method to import clubs from Firestore
- Added `_mapToClub()` method to convert Firestore data to Club objects
- Updated `importAllData()` to import clubs and include club count in results

## How It Works

### Data Flow

**Admin App (targetsawayadmin)** → **Firebase Firestore** → **User App (targetsaway)**

1. **Admin app** loads clubs from `clublist.dart` into Hive and syncs to Firebase
2. **Firebase** stores clubs in the 'clubs' collection
3. **User app** imports clubs from Firebase into its local Hive database

### Import Process

When the user triggers data import in the targetsaway app (Settings → Import from Firebase):

1. **Clear** existing clubs data from local Hive
2. **Download** all clubs from Firebase 'clubs' collection
3. **Import** each club into the local 'clubs' Hive box
4. Display import results including club count

## Usage in User App

```dart
import 'package:hive/hive.dart';
import 'package:targetsaway/models/hive/club.dart';

// Access the clubs box
final clubsBox = Hive.box<Club>('clubs');

// Get all clubs
List<Club> allClubs = clubsBox.values.toList();

// Get club count
int clubCount = clubsBox.length;

// Get a specific club by index
Club? club = clubsBox.getAt(0);

// Search for clubs
List<Club> searchResults = clubsBox.values
    .where((club) => club.clubname.toLowerCase().contains('london'))
    .toList();
```

## Database Details

- **Box Name**: `clubs`
- **Model Type**: `Club` (typeId: 133)
- **Fields**:
  - `clubname` (String) - The name of the shooting club
- **Data Source**: Firebase Firestore 'clubs' collection

## Important Notes

- The clubs data is synced FROM Firebase TO the user app (download only)
- The user app does NOT upload clubs data to Firebase
- To update clubs, modify `clublist.dart` in the **admin app** and sync to Firebase
- Users must import data from Firebase to get the latest club list
- The import operation uses REPLACE mode - existing club data is cleared before importing

## Testing

✅ Club model created with typeId 133
✅ ClubAdapter registered successfully
✅ Clubs box opens on app startup
✅ Import methods added to DataImporter
✅ No compilation errors
✅ All existing functionality preserved
